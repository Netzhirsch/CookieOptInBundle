services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: true

  _instanceof:
    Symfony\Bundle\FrameworkBundle\Controller\AbstractController:
      calls:
        - [ setContainer, [ '@Psr\Container\ContainerInterface' ] ]

  Netzhirsch\CookieOptInBundle\Controller\ConsentController:

  Netzhirsch\CookieOptInBundle\Controller\CookieController:
      - '@request_stack'
      - '@contao.framework'

  Netzhirsch\CookieOptInBundle\EventListener\PageLayoutListener:
    - '@parameter_bag'

  Netzhirsch\CookieOptInBundle\EventListener\ContentElementListener:
    - '@parameter_bag'
    - '@doctrine.orm.entity_manager'
    - '@netzhirsch_cookie_opt_in.repository.cookie_tool_repository'
    - '@contao.insert_tag.parser'

  Netzhirsch\CookieOptInBundle\EventListener\ReplaceInsertTag:

  netzhirsch_cookie_opt_in.repository.cookie_tool_repository:
    class: Netzhirsch\CookieOptInBundle\Repository\CookieToolRepository
    arguments:
      - '@Doctrine\Common\Persistence\ManagerRegistry'

  Netzhirsch\CookieOptInBundle\Migration\FieldPaletteToGroupWidgetMigration:
    tags:
      - { name: contao.migration, priority: 0 }
    arguments:
      - '@doctrine.orm.entity_manager'
