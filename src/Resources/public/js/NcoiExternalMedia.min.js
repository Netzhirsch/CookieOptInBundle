class NcoiExternalMedia{constructor(e){this.$=e}addOnClickEvent(i){let a=this.$,t=this;a(document).on("click",".ncoi---release",function(e){e.preventDefault(),console.log("test");var e=a(this).parents(".ncoi---blocked"),o=e.find(".ncoi---sliding"),c=a('[data-block-class="'+o.data("block-class")+'"]');o.prop("checked")?(c.prop("checked",!0).trigger("change"),c=o.data("block-class")+"",a('[data-block-class="ncoi---'+c+'"]').prop("checked",!0).trigger("change"),new NcoiTrack(a).track(1,i),t.decode(i),a("."+o.data("block-class")).each(function(){t.addIframe(a(this))})):(t.isCustomGmap(e)?t.showCustomGmap(e):(t.addIframe(e),e.trigger("change")),t.isC4gMap(e)&&t.showC4gMap(e))})}onChangeSliding(){let c=this.$;c(document).on("click",".ncoi---sliding.ncoi---blocked",function(){let o=c(this).prop("checked"),e=c(this).data("cookie-ids")+"";0<e.indexOf(",")?(e=e.split(",")).forEach(function(e){c("#ncoi---table-cookie-"+e).prop("checked",o)}):c("#ncoi---table-cookie-"+e).prop("checked",o)})}decode(e){let i=this,a=i.$;let t=new NcoiApp(a).getLocalStorage(e).cookieIds;a(".ncoi---blocked").each(function(e,o){let c=a(this);t.forEach(function(e){a(o).hasClass("ncoi---cookie-id-"+e)&&(0<c.length&&(i.isCustomGmap(c)?i.showCustomGmap(c):(i.addIframe(c),c.trigger("change")),i.isC4gMap(c))&&i.showC4gMap(c),console.log(c))})})}showCustomGmap(){var e=this.$;e(".ce_google_map").removeClass("ncoi---hidden"),e(".mod_catalogUniversalView").removeClass("ncoi---hidden"),e(".ncoi---custom_gmap").addClass("ncoi---hidden")}showC4gMap(e){var o=this.$;e.parent().remove(),o(".ncoi---custom_gmap").removeClass("ncoi---hidden")}isCustomGmap(e){return 0<e.parent(".ncoi---custom_gmap").length}isC4gMap(e){return 0<e.parent(".ncoi---c4g_map").length}addIframe(c){let i=this.$;if(!c.hasClass("ncoi---hidden")){let o="";if(1<c.length)for(let e=0;e<c.length;e++)i("."+c[e].classList[3]).each(function(){o=i(this).find("script").text().trim()});else o=c.find("script").text().trim();c.addClass("ncoi---hidden"),0<=o.indexOf("data-only-script")?i("head").append(o):c.after(o)}}}