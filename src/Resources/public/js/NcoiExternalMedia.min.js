class NcoiExternalMedia{constructor(e){this.$=e}addOnClickEvent(i){let t=this.$,a=this;t(document).on("click",".ncoi---release",function(e){e.preventDefault(),console.log("test");var e=t(this).parents(".ncoi---blocked"),o=e.find(".ncoi---sliding"),c=t('[data-block-class="'+o.data("block-class")+'"]');o.prop("checked")?(c.prop("checked",!0).trigger("change"),c=o.data("block-class")+"",t('[data-block-class="ncoi---'+c+'"]').prop("checked",!0).trigger("change"),new NcoiTrack(t).track(1,i),a.decode(i),t("."+o.data("block-class")).each(function(){a.addIframe(t(this))})):(a.isCustomGmap(e)?a.showCustomGmap(e):(a.addIframe(e),e.trigger("change")),a.showC4gMap())})}onChangeSliding(){let c=this.$;c(document).on("click",".ncoi---sliding.ncoi---blocked",function(){let o=c(this).prop("checked"),e=c(this).data("cookie-ids")+"";0<e.indexOf(",")?(e=e.split(",")).forEach(function(e){c("#ncoi---table-cookie-"+e).prop("checked",o)}):c("#ncoi---table-cookie-"+e).prop("checked",o)})}decode(e){let i=this,t=i.$;let a=new NcoiApp(t).getLocalStorage(e).cookieIds;t(".ncoi---blocked").each(function(e,o){let c=t(this);a.forEach(function(e){t(o).hasClass("ncoi---cookie-id-"+e)&&(0<c.length&&(i.isCustomGmap(c)?i.showCustomGmap(c):(i.addIframe(c),c.trigger("change"))),console.log(c))})})}showCustomGmap(){var e=this.$;e(".ce_google_map").removeClass("ncoi---hidden"),e(".mod_catalogUniversalView").removeClass("ncoi---hidden"),e(".ncoi---custom_gmap").addClass("ncoi---hidden")}showC4gMap(){(0,this.$)(".ncoi---custom_gmap").removeClass("ncoi---hidden")}isCustomGmap(e){return 0<e.parent(".ncoi---custom_gmap").length}isC4gMap(e){e=e.parent(".mod_c4g_maps");return console.log(e),0<e.length}addIframe(c){let i=this.$;if(!c.hasClass("ncoi---hidden")){let o="";if(1<c.length)for(let e=0;e<c.length;e++)i("."+c[e].classList[3]).each(function(){o=i(this).find("script").text().trim()});else o=c.find("script").text().trim();c.addClass("ncoi---hidden"),0<=o.indexOf("data-only-script")?i("head").append(o):c.after(o)}}}